<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Analysis &mdash; Whalebone 3.2.1-12 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Reporting" href="reporting.html" />
    <link rel="prev" title="Cloud DNS resolvers" href="cloud_resolver.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/whalebone.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment options</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="local_resolver.html">Local DNS resolver</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud_resolver.html">Cloud DNS resolvers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#threats">Threats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-search-for-audit-block-events">How to search for audit/block events.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-search-for-a-domain">How to search for a domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-search-for-events-based-on-specific-ip-address">How to search for events based on specific IP address.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-search-for-events-based-on-specific-threat-category">How to search for events based on specific threat category.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-change-the-date-range-of-the-available-data">How to change the date range of the available data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-analyze-a-domain">How to analyze a domain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dns-traffic">DNS Traffic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-view-all-queries-of-a-specific-type">How to view all queries of a specific type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-view-all-answers-of-a-specific-type">How to view all answers of a specific type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#header-n282">How to search for a domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#header-n285">How to change the date range of the available data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-view-dga-domain-generation-algorithm-indications">How to view DGA (Domain Generation Algorithm) indications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-tips-and-tricks">Other Tips and Tricks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reporting.html">Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain_resolution_analysis.html">Domain resolution analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="user.html">User/Organization Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="hos.html">Home Office Security</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Whalebone</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Data Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/data_analysis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-analysis">
<span id="header-n233"></span><h1>Data Analysis<a class="headerlink" href="#data-analysis" title="Permalink to this headline"></a></h1>
<p>Whalebone Portal (graphical user interface) gives the user number of
possibilities how to analyze what is happening on the DNS resolvers and
the network.</p>
<section id="threats">
<span id="header-n236"></span><h2>Threats<a class="headerlink" href="#threats" title="Permalink to this headline"></a></h2>
<p>Threats are special events where there is a DNS request for a domain
that is present within the reputation database. There are two types of
actions when a threat is detected. The first is to audit the event while
the second is to block it.</p>
<p>The action that is to be implemented depends on the policies that are
assigned to the specific resolver. For more on that please refer to
<a class="reference external" href="http://docs.whalebone.io/cs/latest/local_resolver.html#bezpecnostni-politiky">Security
Policies</a>.</p>
<p>There are some pre-configured filters that can be applied on the data on
the portal. Some sample queries can be found below. These queries depict
the majority of the use cases but there is no hard limit as the
available search engine is <strong>full-text</strong> and <em>any</em> query can be compiled
impromptu.</p>
<p>You can watch step-by-step video guide below:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/GVZoMOEUWzM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<section id="how-to-search-for-audit-block-events">
<span id="header-n240"></span><h3>How to search for audit/block events.<a class="headerlink" href="#how-to-search-for-audit-block-events" title="Permalink to this headline"></a></h3>
<div class="line-block">
<div class="line">There are two options in order to filter the different types of
events.</div>
<div class="line">In the first option a visual filter can be applied where the type that
a user clicks is disabled from the graph. This can aid the process of
having a basic overview of the traffic’s qualities.</div>
</div>
<figure class="align-default">
<img alt="" src="_images/block_graph.gif" />
</figure>
<p>For more advanced usage a query can be issued:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">action:</span> <span class="pre">block</span></code> in order to filter the blocked events</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">action:</span> <span class="pre">audit</span></code> in order to filter the audited events</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">action:</span> <span class="pre">allow</span></code> in order to view the Block page bypasses</p></li>
</ul>
<p>This query updates the content of the whole dashboard.</p>
</section>
<section id="how-to-search-for-a-domain">
<span id="header-n300"></span><h3>How to search for a domain<a class="headerlink" href="#how-to-search-for-a-domain" title="Permalink to this headline"></a></h3>
<p>In order to search for a domain’s instances in the events, the easiest way
is to click on it in the provided log history. Alternatively a query
could be issued in the search engine with the term: <code class="docutils literal notranslate"><span class="pre">domain:&lt;domain&gt;</span></code></p>
</section>
<section id="how-to-search-for-events-based-on-specific-ip-address">
<span id="header-n253"></span><h3>How to search for events based on specific IP address.<a class="headerlink" href="#how-to-search-for-events-based-on-specific-ip-address" title="Permalink to this headline"></a></h3>
<p>A filtering of an IP address is possible by clicking on the specific
<code class="docutils literal notranslate"><span class="pre">Source</span> <span class="pre">IP</span></code> bar and in this way filtering the content of the whole
portal.</p>
<p>A more advanced use case could be to directly search for IP address in
the search field and use the operator <code class="docutils literal notranslate"><span class="pre">client_ip</span></code> such as: <code class="docutils literal notranslate"><span class="pre">client_ip:&lt;IP</span> <span class="pre">address&gt;</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In the following example the data are anonymized so a reader could
consider that instead of the previewed hash value, an IP address is
used.</p>
</div>
<figure class="align-default">
<img alt="" src="_images/request_ip.gif" />
</figure>
</section>
<section id="how-to-search-for-events-based-on-specific-threat-category">
<span id="header-n258"></span><h3>How to search for events based on specific threat category.<a class="headerlink" href="#how-to-search-for-events-based-on-specific-threat-category" title="Permalink to this headline"></a></h3>
<p>There are multiple threat categories available.</p>
<p>To name a few: <code class="docutils literal notranslate"><span class="pre">malware</span></code>, <code class="docutils literal notranslate"><span class="pre">c&amp;c</span></code>, <code class="docutils literal notranslate"><span class="pre">blacklist</span></code>,
<code class="docutils literal notranslate"><span class="pre">phishing</span></code>, <code class="docutils literal notranslate"><span class="pre">coinminer</span></code>, <code class="docutils literal notranslate"><span class="pre">spam</span></code>, and <code class="docutils literal notranslate"><span class="pre">compromised</span></code>.</p>
<p>A <em>simple</em> alternative could be to click on the bar that matches the
detected threat and filter only the specific type.</p>
<figure class="align-default">
<img alt="" src="_images/phising.gif" />
</figure>
<p>Another approach could be to click on the filter icon and in this way
specify the desired category, as can be seen in the next image.</p>
<figure class="align-default">
<img alt="" src="_images/cc.gif" />
</figure>
</section>
<section id="how-to-change-the-date-range-of-the-available-data">
<span id="header-n266"></span><h3>How to change the date range of the available data<a class="headerlink" href="#how-to-change-the-date-range-of-the-available-data" title="Permalink to this headline"></a></h3>
<div class="line-block">
<div class="line">The date range of the data that can be previewed in the portal can
change in multiple ways.</div>
<div class="line">The following image shows three of the available ways. These can be
summarized as simply by clicking on the current date that
automatically transcribes to the current time, by inserting the date
in text in the <code class="docutils literal notranslate"><span class="pre">YYYY.MM.DD</span> <span class="pre">HH:mm:ss</span></code> format or by using the builtin
tool that provides quick suggestions.</div>
</div>
<figure class="align-default">
<img alt="" src="_images/date_range.gif" />
</figure>
</section>
<section id="how-to-analyze-a-domain">
<span id="id1"></span><h3>How to analyze a domain<a class="headerlink" href="#how-to-analyze-a-domain" title="Permalink to this headline"></a></h3>
<p>In case to know further information about domain, especially what score
Whalebone assigns to particular domain, when was first seen and categorized
as malicious, if it falls under regulatory category or what external sources
know about it, then watch step-by-step video below:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/WJzsGvBiF80" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="dns-traffic">
<span id="header-n269"></span><h2>DNS Traffic<a class="headerlink" href="#dns-traffic" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DNS</span> <span class="pre">Traffic</span></code> tab contains an overview of the traffic that has
been logged on the resolver. It contains all the queries along with some
additional information such as the type, the answer and the TTL (time to
live) of the answer.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The data are subject to de-duplication. This means that the resolver
logs only unique combinations of query, query type and answer per 24
hour time frame. For this reason, a query might not be available on
the portal even though it has been resolved.</p>
</div>
<p>You can watch step-by-step video guide below:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Qgj-fUHS5qg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Below are some of the most useful filtering options of the available data
will be described.</p>
<section id="how-to-view-all-queries-of-a-specific-type">
<span id="header-n274"></span><h3>How to view all queries of a specific type<a class="headerlink" href="#how-to-view-all-queries-of-a-specific-type" title="Permalink to this headline"></a></h3>
<p>In order to view all queries of a specific type the most straight
forward way is to click on the filter icon and select the desired value.</p>
<figure class="align-default">
<img alt="" src="_images/query_type.gif" />
</figure>
<p>Another option is to insert a query in the search field. This query
could be in the form <code class="docutils literal notranslate"><span class="pre">query_type:&lt;type&gt;.</span></code> The possible types are:
<code class="docutils literal notranslate"><span class="pre">A</span></code>,<code class="docutils literal notranslate"><span class="pre">AAAA</span></code>, <code class="docutils literal notranslate"><span class="pre">CNAME</span></code>, <code class="docutils literal notranslate"><span class="pre">MX</span></code>, <code class="docutils literal notranslate"><span class="pre">NS</span></code>, <code class="docutils literal notranslate"><span class="pre">PTR</span></code>, <code class="docutils literal notranslate"><span class="pre">RRSIG</span></code>,
<code class="docutils literal notranslate"><span class="pre">SPF</span></code>, <code class="docutils literal notranslate"><span class="pre">SRV</span></code> and<code class="docutils literal notranslate"><span class="pre">TXT</span></code>.</p>
</section>
<section id="how-to-view-all-answers-of-a-specific-type">
<span id="header-n279"></span><h3>How to view all answers of a specific type<a class="headerlink" href="#how-to-view-all-answers-of-a-specific-type" title="Permalink to this headline"></a></h3>
<p>The answers can be filtered by selecting the specific bar in the
respective <code class="docutils literal notranslate"><span class="pre">Answers</span></code> field. Additionally, the answers can be viewed by
issuing a query in the form <code class="docutils literal notranslate"><span class="pre">answer:&lt;answer_type&gt;</span></code>.
Useful answer types are <code class="docutils literal notranslate"><span class="pre">NXDOMAIN</span></code> or <code class="docutils literal notranslate"><span class="pre">SERVFAIL</span></code>.</p>
<figure class="align-default">
<img alt="" src="_images/answer.gif" />
</figure>
</section>
<section id="header-n282">
<span id="id2"></span><h3>How to search for a domain<a class="headerlink" href="#header-n282" title="Permalink to this headline"></a></h3>
<p>In order to search for a domain’s instances in the logs, the easiest way
is to click on it in the provided log history. Alternatively a query
could be issued in the search engine with a fully qualified domain: <code class="docutils literal notranslate"><span class="pre">query:&lt;domain&gt;.</span></code>
Please note the <code class="docutils literal notranslate"><span class="pre">.</span></code> at the end of the query.</p>
<p>A more fine-grained search can be performed by searching for more
specific domain based on the available domain levels. The acceptable
search fields are <code class="docutils literal notranslate"><span class="pre">domain_l1:&lt;domain_l1&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">domain_l2:&lt;domain_l2&gt;</span></code>.</p>
</section>
<section id="header-n285">
<span id="id3"></span><h3>How to change the date range of the available data<a class="headerlink" href="#header-n285" title="Permalink to this headline"></a></h3>
<p>Please refer to <a class="reference external" href="http://docs.whalebone.io/en/latest/data_analysis.html#how-to-change-the-date-range-of-the-available-data">How to change the date range of the available
data</a>
of the Threats section.</p>
</section>
<section id="how-to-view-dga-domain-generation-algorithm-indications">
<span id="header-n287"></span><h3>How to view DGA (Domain Generation Algorithm) indications<a class="headerlink" href="#how-to-view-dga-domain-generation-algorithm-indications" title="Permalink to this headline"></a></h3>
<p>Whalebone provides a view of indicators of DGA instances. These
indications can be accessed by using the filter icon and selecting DGA
as can be seen below. Alternatively the query <code class="docutils literal notranslate"><span class="pre">dga.class:1</span></code> can be issued.</p>
<figure class="align-default">
<img alt="" src="_images/dga.gif" />
</figure>
</section>
<section id="other-tips-and-tricks">
<span id="header-n301"></span><h3>Other Tips and Tricks<a class="headerlink" href="#other-tips-and-tricks" title="Permalink to this headline"></a></h3>
<p>Search operators (wildcard (*), logical AND, logical OR) can also be used to improve the search result precision.
It should be noted that some requested fields in <code class="docutils literal notranslate"><span class="pre">DNS</span> <span class="pre">traffic</span></code> and <code class="docutils literal notranslate"><span class="pre">Threats</span></code> are slightly different.</p>
<p>Example queries are:</p>
<ul class="simple">
<li><p>All queries from IP addresses that start with 10:</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DNS Traffic</p></th>
<th class="head"><p>Threats</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">client:</span> <span class="pre">10.*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">client_ip:</span> <span class="pre">10.*</span></code></p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>All queries for domain whalebone.io:</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 64%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DNS Traffic</p></th>
<th class="head"><p>Threats</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">query:</span> <span class="pre">whalebone.io.</span></code>  (please also include the dot at the end)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">domain:</span> <span class="pre">whalebone.io</span></code></p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Queries from IP address 1.2.3.4 for whalebone.io:</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DNS Traffic</p></th>
<th class="head"><p>Threats</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">client:</span> <span class="pre">1.2.3.4</span> <span class="pre">AND</span> <span class="pre">query:</span> <span class="pre">whalebone.io.</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">client_ip:</span> <span class="pre">1.2.3.4</span> <span class="pre">AND</span> <span class="pre">domain:</span> <span class="pre">whalebone.io</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Filtering operators are placed statically to the URL address. Therefore, you can create your set of
filters in advance (such as view on individual IPs) and to use them when necessary. Afterwards, you
can place them to your CRM for the specific user’s account and to access the filtered view immediately. It
will help saving your time when customer asks for the support as you can immediately open their
details.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cloud_resolver.html" class="btn btn-neutral float-left" title="Cloud DNS resolvers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reporting.html" class="btn btn-neutral float-right" title="Reporting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Whalebone, s.r.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>